<?php
/*############################################################################
	# Script Name 	: registrationHtml.php
	# Description 	: Page which holds the display logic for adding a customer(customer registration)
	# Coded by 		: ANU
	# Created on	: 04-Jan-2008
	# Modified by	: 
	# Modified On	: 
	##########################################################################*/
	class newsletter_Html
	{
		// Defining function to show the site review
		function Show_newsletter()
		{
		global $Captions_arr,$ecom_siteid,$db,$ecom_hostname,$vImage,$Settings_arr,$pagetype,$alert;
		$Captions_arr['NEWS_LETTER'] = getCaptions('NEWS_LETTER'); 
		 $HTML_img = $HTML_alert = $HTML_treemenu='';
		$HTML_treemenu .=
		'<div class="tree_menu_conA">
		  <div class="tree_menu_topA"></div>
		  <div class="tree_menu_midA">
			<div class="tree_menu_content">
			  <ul class="tree_menu">
			<li><a href="'.url_link('',1).'">'.stripslash_normal($Captions_arr['COMMON']['TREE_MENU_HOME_LINK']).'</a></li>
			
			 <li>'.stripslash_normal($Captions_arr['NEWS_LETTER']['NEWSLETTER_TREEMENU_TITLE']).'</li>
			</ul>
			  </div>
		  </div>
		  <div class="tree_menu_bottomA"></div>
		</div>';
		echo $HTML_treemenu;
		if($alert)
				{ 
				$HTML_alert .= 
				'<div class="cart_msg_outerA">
				<div class="cart_msg_topA"></div>
						<div class="cart_msg_txt">';
							 echo  $alert;
				$HTML_alert .=	'</div>
				<div class="cart_msg_bottomA"></div>
				</div>';
				}
				echo $HTML_alert;
		?>
  		<form name="frm_newsletter" method="post" action="" class="frm_cls" onsubmit="return newsletter_validation(this)">
		<input type="hidden" name="action_purpose" value="insert_news" />
		<div class="reg_shlf_outr">
			   <div class="reg_shlf_inner">
				<div class="reg_shlf_inner_top"></div>
					<div class="reg_shlf_inner_cont">
						<?php
						if($Captions_arr['NEWS_LETTER']['NEWS_CUSTOMER_DESC']!='')
						{
						?>
						<div class="reg_shlf_hdr_outr"><div class="reg_shlf_hdr_in"><span><?php echo stripslash_normal($Captions_arr['NEWS_LETTER']['NEWS_CUSTOMER_DESC'])?></span></div></div>
						<?php
						}
						?>	   
					<div class="reg_shlf_cont_div">
						<div class="reg_shlf_pdt_con">	
							<table width="100%" border="0" cellspacing="0" cellpadding="0" class="reg_table">
								<tr>
								<td colspan="2" class="regiheader" align="left"><span class="reg_header"><span><?=stripslash_normal($Captions_arr['NEWS_LETTER']['NEWSCUSTOMER_DETAILS_HEADER'])?></span></span></td>
								</tr>
							<?php
							if ($title)
							{
							?>		
								<tr>
								<td colspan="2" class="newsletterheader"><?php echo $title?></td>
								</tr>
							<?php
							}
							if($Settings_arr['newsletter_title_req']==1)
							{
							?>	
								<tr>
								<td class="regiconentA"><?php echo stripslash_normal($Captions_arr['NEWS_LETTER']['TITLE'])?></td>
								<td align="left" valign="top" class="regi_txtfeildA">
								<select name="newsletter_title" class="regiinput" id="newsletter_title" >
								<option value="">Select</option>
								<option value="Mr.">Mr.</option>
								<option value="Ms.">Ms.</option>
								<option value="Mrs.">Mrs.</option>
								<option value="Miss.">Miss.</option> 
								<option value="M/S.">M/S.</option>
								</select>
								</td>
								</tr>	
							<?php
							}
							if($Settings_arr['newsletter_name_req']==1)
							{
							?>
							<tr>
								<td class="regiconentA"><?php echo stripslash_normal($Captions_arr['NEWS_LETTER']['NAME'])?></td>
								<td align="left" valign="top" class="regi_txtfeildA">
								<input name="newsletter_name" type="text" class="regiinput" id="newsletter_name" size="25" />				</td>
							</tr>	
							<?php
							}
							?>		 
							<tr>
								<td class="regiconentA"><?php echo stripslash_normal($Captions_arr['NEWS_LETTER']['EMAIL'])?></td>
								<td align="left" valign="top" class="regi_txtfeildA">
								<input name="newsletter_email" type="text" class="regiinput" id="newsletter_email" size="25" />				</td>
							</tr>
							<?php
							if($Settings_arr['newsletter_phone_req']==1)
							{
							?>
							<tr>
								<td class="regiconentA"><?php echo stripslash_normal($Captions_arr['NEWS_LETTER']['PHONE'])?></td>
								<td align="left" valign="top" class="regi_txtfeildA">
								<input name="newsletter_phone" type="text" class="regiinput" id="newsletter_phone" size="25" />				</td>
							</tr>
							<?php
							}
							if($Settings_arr['newsletter_group_req']==1)
							{
							// Check whether any customer groups exists
							$sql_groups = "SELECT custgroup_id,custgroup_name 
											FROM 
												customer_newsletter_group 
											WHERE 
												sites_site_id = $ecom_siteid AND custgroup_active='1'
											ORDER BY custgroup_name ";
							$ret_groups = $db->query($sql_groups);
							if ($db->num_rows($ret_groups))
							{			
							$cust_group_arr = array();
							while ($row_groups = $db->fetch_array($ret_groups))
							{
								$cst_id 					= $row_groups['custgroup_id'];
								$cust_group_arr[$cst_id]	= stripslash_normal($row_groups['custgroup_name']);
							}						
							?>
							<tr>
								<td valign="top" class="regiconentA"><?php echo stripslash_normal($Captions_arr['NEWS_LETTER']['GROUP'])?></td>
								<td  align="left" valign="top" class="regi_txtfeildA">
								<?php
								if (count($cust_group_arr))
								{ 
								echo generateselectbox('newsletter_group[]',$cust_group_arr,0,'','',5,'',false,'sel_newsletter_group');
								}	
								?>
								</td>
							</tr>
							<?php
							}	
							}
							
							?>
							
							<?php 
							if($Settings_arr['imageverification_req_newsletter']) // if image verification is required
							{
							?>
							
							<tr>
									<td class="regiconentA" ><?=stripslash_normal($Captions_arr['NEWS_LETTER']['ENTER_CODE'])?></td>
									<td align="left" valign="middle" class="regi_txtfeildA">
									<?php 
										// showing the textbox to enter the image verification code
										$vImage->showCodBox(1,'newsletter_Vimg','class="img_input"'); 
									?>
									</td>
									</tr>
									<tr>
									<td align="left" valign="middle" class="regi_txtfeildA" >&nbsp;	</td>
									<td align="left" valign="middle" class="regi_txtfeildA"><img src="<?php url_verification_image('includes/vimg.php?size=4&pass_vname=newsletter_Vimg&amp;bg=143 186 2')?>" border="0" alt="Image Verification"/>
									</td>
								  </tr>
								  <tr>
									<td align="left" valign="middle" class="regi_txtfeildA" >&nbsp;	</td>
									</tr>
							<?php
							}
							?>
							</table>
						<div style="margin-right:52%">
						<div class="cart_shop_cont"><div>
							<input name="newslettermiddle_Submit" type="submit" class="inner_btn_red" id="newslettermiddle_Submit" value="<?php echo stripslash_normal($Captions_arr['NEWS_LETTER']['SUBSCRIBE'])?>" onclick="show_wait_button(this,'Please wait...')"/>
						</div></div>
						</div>
						</div>
					</div>
					</div>
			   <div class="reg_shlf_inner_bottom"></div>
			   </div>
			   </div>
			</form>
		<?php	
		}
		function Display_Message($alert){
		global $Captions_arr,$ecom_siteid,$db,$ecom_hostname,$Settings_arr,$product_id,$product_name;
	    $Captions_arr['NEWS_LETTER'] = getCaptions('NEWS_LETTER'); 

		?>
			<div class="treemenu">
		<ul>
		<li><a href="<? url_link('');?>" title="<?php echo $ecom_hostname?>"><?=stripslash_normal($Captions_arr['COMMON']['TREE_MENU_HOME_LINK']);?></a> &gt;&gt; </li>
		<li><?=stripslash_normal($Captions_arr['NEWS_LETTER']['NEWSLETTER_TREEMENU_TITLE'])?></li>
		</ul>
		</div>
			<div class="inner_header"><?=stripslash_normal($Captions_arr['NEWS_LETTER']['NEWSLETTER_TREEMENU_TITLE'])?></div>
			<div class="inner_con_clr1" >
			<div class="inner_clr1_top"></div>
			<div class="inner_clr1_middle">
			<table width="100%" border="0" cellspacing="4" cellpadding="0" class="regi_table">
			<tr>
			<td align="left" valign="middle" class="regicontentA"><?php echo $alert; ?></td>
			</tr>
			</table>
			</div>
			<div class="inner_clr1_bottom"></div>
			</div>
		<?php	
		}
	};	
?>
	
			